# Claude Code Journal

This journal tracks substantive work on documents, diagrams, and documentation content.

---

1. **Task - Add Repository Badges**: Added Docker pulls and GitHub clones badges to README.md to display download and clone statistics<br>
    **Result**: Added Docker pulls badge and GitHub clones badge below the existing Docker Image size badge for better visibility of repository metrics

2. **Task - On-demand environment installation**: Migrated from pre-installed conda environments to declarative on-demand installation via workspace utilities<br>
    **Result**: Major architectural change to reduce Docker image size and build time by moving conda environment installations from build-time to runtime. Commented out tensorflow, torch, and r_base environment installations in Dockerfile (lines 369-400, 449-452). Created workspace-utils install-conda-env.sh menu system with dedicated installation scripts in install-conda-env.d/ directory: tensorflow.sh (clones base + installs from /environment_tensorflow.yml), torch.sh (clones base + installs from /environment_torch.yml), r.sh (creates fresh + installs from /environment_r.yml), rust.sh (creates fresh with evcxr Jupyter kernel from /environment_rust.yml). Modified test-cuda.sh to check environment existence via conda env list before executing tests, providing user-friendly installation instructions if environments not found. Updated Dockerfile to copy environment_rust.yml to container root. Updated welcome-template.html to reflect "Pre-installed: base" and "Install on-demand: tensorflow, torch, r_base, rust" with workspace-utils installation instructions. Updated welcome-message.txt to mention "ai assistants and extra environments". Added version comment to environment_base_jupyterlab.yml. Created comprehensive RELEASE.md entry for version 2.60 documenting breaking changes, migration guide, benefits, and technical details. All changes staged in git, ready for commit

3. **Task - Optimize installation and update documentation**: Refined environment installation approach and updated README for v3.0.0 release<br>
    **Result**: Fixed Makefile tag retrieval to use git tag --sort=-creatordate for accurate latest tag identification. Modified TensorBoard startup script (14_start_tensorboard.sh) to launch from base environment instead of tensorflow environment. Optimized tensorflow.sh and torch.sh installation scripts to apply environment_base_template.yml (core packages only) instead of cloning full base environment, reducing installation time and disk usage. Updated README.md to reflect on-demand environment model: marked base as pre-installed, documented workspace-utils.sh installation process, added Rust environment documentation, and clarified TensorBoard is included in base. Built Docker image successfully (7.94GB). Committed changes and tagged as 3.0.0_cuda-13.0.1_jl-4.4.10

4. **Task - Add GitHub Actions CI/CD workflow**: Created automated build workflow for continuous integration<br>
    **Result**: Created .github/workflows/docker-build.yml workflow file configured for build-only mode (no Docker Hub push). Workflow triggers on main branch pushes, version tags matching pattern *_cuda-*_jl-*, and manual workflow dispatch. Uses Docker buildx with GitHub Actions cache for efficient builds. Configured for linux/amd64 platform. Added GitHub Actions build status badge to README.md. Workflow validates Docker image builds without requiring Docker Hub credentials or secrets. Updated README.md to reflect v3.0 on-demand environment model - clarified only base environment is pre-installed, TensorFlow/PyTorch require installation via workspace-utils.sh, faster build times, and TensorBoard included in base. Changed workflow from full Docker build to Dockerfile validation using hadolint linter. Added pull_request trigger. Configured ignore list for hadolint warnings: DL3008, DL3013, DL3015, DL3059 (existing), DL3027 (apt vs apt-get), DL4006 (pipefail), SC2006 (backticks), SC1008 (heredoc false positives)

5. **Task - Rename workspace-utils to lab-utils**: Simplified utility naming convention for better clarity<br>
    **Result**: Renamed workspace-utils.sh to lab-utils (removed .sh extension), renamed workspace-utils.d folder to lab-utils.d. Updated SCRIPTS_DIR path in lab-utils script from /opt/utils/workspace-utils.d to /opt/utils/lab-utils.d. Changed dialog title from "Workspace Utils" to "Lab Utils". Updated all references in welcome-template.html (utilities section and conda environments section) and welcome-message.txt to use new naming

6. **Task - Rename install-code-assistant to install-ai-assistant**: Aligned naming with AI terminology<br>
    **Result**: Renamed install-code-assistant.sh to install-ai-assistant.sh, renamed install-code-assistant.d folder to install-ai-assistant.d. Updated SCRIPTS_DIR path in install-ai-assistant.sh from install-code-assistant.d to install-ai-assistant.d. Changed dialog title from "Install Code Assistant" to "Install AI Assistant" and menu text from "Select code assistant to install" to "Select AI assistant to install". Updated header comment from "Installs Code Assistant" to "Installs AI Assistant"

7. **Task - Add JupyterLab Extensions**: Enhanced base environment with parquet file viewing capability<br>
    **Result**: Added jupyterlab_parquet_viewer_extension to environment_base_jupyterlab.yml (line 50) to enable viewing parquet files directly in JupyterLab interface

8. **Task - Update documentation for lab-utils**: Completed documentation updates for lab-utils renaming and fixed startup script<br>
    **Result**: Fixed startup script 03_workspace_scripts.sh to create symlinks for all files in /opt/utils (not just .sh files), ensuring lab-utils without extension is properly linked. Updated README.md with 9 changes: replaced all workspace-utils.sh references with lab-utils, changed section header from "Workspace Utilities" to "Lab Utilities", updated script references in JupyterLab Extensions, Conda Environments, Configuration, Deep Learning, and User Experience sections. Added new screenshot-lab-utils.png showing the Lab Utils dialog interface and updated README to reference the new screenshot

9. **Task - Group git utilities**: Organized git operations under unified menu structure<br>
    **Result**: Created git-utils.sh menu script with dialog-based interface (title: "Git Utils", menu: "Select git utility to execute"). Created git-utils.d/ directory and moved 4 git scripts into it: git-commit-repos.sh, git-pull-repos.sh, git-pull-submodules.sh, git-push-repos.sh. Reduces main lab-utils menu from 11 items to 8 items, consistent with existing grouping patterns (install-ai-assistant, install-conda-env)

10. **Task - Add Lab Utils launcher tile**: Created JupyterLab launcher tile for quick access to lab utilities<br>
    **Result**: Added jupyter_app_launcher configuration to overrides.json with Lab Utils tile. Tile uses wrench icon, opens terminal, automatically executes lab-utils, and prompts "Press Enter to close..." after completion. Placed in "Utilities" category in the JupyterLab launcher alongside Notebook, Console, and Terminal tiles. Created launch-lab-utils wrapper script to handle proper terminal initialization - waits for terminal to initialize (0.5s), verifies terminal has minimum dimensions (20x80), clears screen for clean interface, runs lab-utils, and handles exit prompt. Updated overrides.json to use launch-lab-utils wrapper instead of direct lab-utils execution

11. **Task - Add JupyterLab Extensions**: Enhanced base environment with mermaid diagram export capability<br>
    **Result**: Added jupyterlab_mmd_to_png_extension to environment_base_jupyterlab.yml (line 51) to enable exporting mermaid diagrams to PNG format directly from JupyterLab interface

12. **Task - Migrate version management system**: Converted project configuration from JSON to environment variable format<br>
    **Result**: Replaced project.json with project.env using standard environment variable syntax (KEY=VALUE). Updated Makefile to use include directive for sourcing variables instead of shell invocation with Python JSON parsing. Modified increment_version.py to parse and update .env format with line-based processing. Enables direct variable access in Makefile (TAG := $(VERSION)) following standard make practices for external configuration

13. **Task - Refactor launcher wrapper script**: Renamed launch-lab-utils to standard shell script naming and excluded from workspace<br>
    **Result**: Renamed launch-lab-utils to launch-lab-utils.sh following standard shell script conventions. Updated startup script 03_workspace_scripts.sh to exclude launch-lab-utils.sh from workspace symlinks. Modified overrides.json to reference full path /opt/utils/launch-lab-utils.sh. Wrapper script remains accessible only through JupyterLab launcher, keeping user workspace clean

14. **Task - Replace parquet viewer extension**: Upgraded to tabular data viewer for broader format support<br>
    **Result**: Replaced jupyterlab_parquet_viewer_extension with jupyterlab_tabular_data_viewer_extension in environment_base_jupyterlab.yml. New extension supports parquet, csv, tsv, and excel file formats providing unified viewer for tabular data

15. **Task - Fix lab utils launcher configuration**: Corrected launcher tile configuration to use proper yaml format and fix terminal behavior<br>
    **Result**: Created jp_app_launcher_lab_utils.yaml in jupyter_app_launcher directory following jupyter_app_launcher extension's proper configuration format. Removed incorrect launcher configuration from overrides.json. Fixed launcher to use terminal type with source field (not command field) to properly auto-execute lab-utils script. Styled wrench.svg icon to match existing launcher tiles - changed color from black (#030104) to blue (#306998) and added padding by expanding viewBox from "0 0 28.306 28.306" to "-5 -5 38.306 38.306". Fixed terminal behavior to prevent return to shell prompt by adding exit command to launch-lab-utils.sh and using exec prefix in launcher YAML source field. Launcher tile now properly appears in Utilities category, auto-executes lab-utils, and closes cleanly after completion
