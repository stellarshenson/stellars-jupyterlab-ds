<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>stellars-jupyterlab-ds - Welcome</title>
  <style>
    :root { color-scheme: light dark; }

    body {
      margin: 2em;
      font-family: "Segoe UI", sans-serif;
      font-size: 14px;
      line-height: 1.4;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }

    h1 {
      flex: 0 0 100%;
      margin-bottom: 0.2em;
      font-size: 1.4em;
    }

    p.intro {
      flex: 0 0 100%;
      margin-top: 0;
      margin-bottom: 1.5em;
    }

    h2 {
      font-size: 1.05em;
      margin-bottom: 0.3em;
    }

    a {
      font-weight: bold;
      word-break: break-word;
    }

    a:hover {
      text-decoration: underline;
    }

    code {
      background-color: rgba(128,128,128,0.1);
      padding: 1px 4px;
      font-family: monospace;
      font-size: 13px;
    }

    .section {
      flex: 0 0 48%;
      margin-bottom: 1.2em;
    }

    ul {
      margin: 0;
      padding-left: 1.1em;
    }

    li {
      margin: 0.2em 0;
    }

    .icon {
      margin-right: 0.3em;
    }

    @media (prefers-color-scheme: dark) {
      body { background-color: #0d1117; color: #c9d1d9; }
      h1, h2 { color: #58a6ff; }
      a { color: #8ae9ff; }
      code { background-color: #161b22; }
    }

    @media (prefers-color-scheme: light) {
      body { background-color: #ffffff; color: #000000; }
      h1, h2 { color: #003366; }
      a { color: #0066cc; }
      code { background-color: #f0f0f0; }
    }

    @media (max-width: 1000px) {
      .section { flex: 0 0 100%; }
    }
  </style>
</head>
<body>
    <h1>Welcome to <b>stellars-jupyterlab-ds</b> build @BUILD_NAME@ created on @BUILD_DATE@</h1>
  <p class="intro">
    Integrated platform for data science, machine learning, deep learning, and model monitoring.
  </p>

  <div class="section">
    <h2>Core Services</h2>
    <ul>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@" target="_blank">Jupyterlab Environment</a> – main notebook lab interface</li>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/lab/tree" target="_blank">Jupyerlab Kernels</a> – access to Jupyterlab kernels for VSCode</li>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/tensorboard" target="_blank">Tensorboard Service</a> – tensorflow training tracking and visualization</li>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/mlflow" target="_blank">MLFlow</a> – track ML/AI experiments and their results</li>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/glances" target="_blank">Glances</a> – system resources monitoring</li>
    </ul>
  </div>

  <div class="section">
    <h2>Optional Tools</h2>
    <ul>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/optuna" target="_blank">Optuna</a> – Optuna Dashboard on port :8080 (must run it first)</li>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/generic-callback" target="_blank">Generic HTTP Callback</a> – optional, using port :8030 </li>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/generic-app" target="_blank">Generic WebApp</a> – Generic Web Application access on port :8080</li>
	<li><span class="icon"></span><a href="http://@JUPYTERLAB_SERVICE_URL@/proxy/NNN/" target="_blank">HTTP Service on :NNN</a> – Any local HTTP service running on port :NNN</li>
    </ul>
  </div>

  <div class="section">
    <h2>Paths</h2>
    <ul>
      <li><code>/mnt/certs</code> – SSL certificates used by lab services</li>
      <li><code>/mnt/shared</code> – (optional) shared drive available across containers</li>
      <li><code>/home/lab/workspace</code> – persistent project workspace</li>
      <li><code>/home/lab</code> – persistent user home and settings</li>
      <li><code>/home/lab/.jupyter</code> – persistent Jupyterlab settings</li>
      <li><code>/home/lab/.local/start-platform.d</code> – custom startup scripts</li>
      <li><code>/home/lab/.cache</code> – persistent cache storage (i.e. datasets)</li>
      <li><code>/home/lab/.cache/mlflow</code> – persistent MLFlow db and artefacts</li>
      <li><code>/tmp/tensorboard</code> – Tensorboard logs (temporary)</li>
    </ul>
  </div>

  <div class="section">
    <h2>Utilities</h2>
    <ul>
      <li><code>~/.local/start-platform.d/*.sh</code> – your custom startup scripts</li>
      <li><code>./workspace-utils.sh</code> – workspace utilities</li>
      <p>workspace utilities help with common workspace management tasks:</p>
      <ul>
	<li>running git commands over all workspace repositories</li>
	<li>setting up new projects</li>
	<li>selecting default conda environment</li>
	<li>testing tensorflow and pytorch GPU and CUDA compatibility</li>
      </ul>
    </ul>
  </div>

  <div class="section">
    <h2>Conda Environments</h2>
    <ul>
      <li>Available: <code>base</code>, <code>tensorflow</code>, <code>torch</code>, <code>r_base</code></li>
      <li>Activate with: <code>conda activate &lt;env&gt;</code></li>
      <li>Kernels are added automatically when <code>ipykernel</code> package is installed</li>
      <li>env variable <code>CONDA_DEFAULT_ENV</code> - your default conda environment</li>
      <li>Script <code>~/.profile</code> - set aliases and <code>CONDA_DEFAULT_ENV</code> here</li>
    </ul>
  </div>

  <div class="section">
    <h2>Additional Notes</h2>
    <ul>
      <li><code>/opt/exports</code> – contains precompiled <code>llama_cpp</code> python wheel for NVIDIA CUDA</li>
      <li>env variable <code>MLFLOW_TRACKING_URI</code> - URI to connect to MLFlow</li>
      <li>env variable <code>TF_CPP_MIN_LOG_LEVEL</code> - tensorflow default logging level (err)</li>
      <li>env variable <code>TENSORBOARD_LOGDIR</code> - logs location for tensorboard</li>
    </ul>
  </div>

  <div class="section">
    <h2>Documentation</h2>
    <ul>
      <li><a href="https://github.com/stellarshenson/stellars-jupyterlab-ds" target="_blank">https://github.com/stellarshenson/stellars-jupyterlab-ds</a> – Project repository</li>
    </ul>
  </div>

  <div class="section">
    <h2>Access Control</h2>
    <ul>
      <li>Use <code>sudo</code> for administrative commands</li>
      <li>Default password: <code>password</code> (unless changed)</li>
    </ul>
  </div>

  <script>
    (function() {
      // const base = window.location.pathname.split("iframes").slice(0, 1)[0].trim('/');  // e.g., /jupyterhub/user/<username>
      const base = window.location.pathname.replace(/\/iframes.*$/, '');
      let jupyterlabUrl = '';
      jupyterlabUrl = `${location.origin}${base}`;
      document.querySelectorAll("a").forEach(link => {
          link.textContent = link.textContent.replace("http://@JUPYTERLAB_SERVICE_URL@", jupyterlabUrl);
          link.href = link.href.replace("http://@JUPYTERLAB_SERVICE_URL@", jupyterlabUrl);
      });
    })();
  </script>
</body>
</html>
