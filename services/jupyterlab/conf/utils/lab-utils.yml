# =============================================================================
# Lab Utils Menu Configuration
# =============================================================================
#
# YAML-driven menu structure for lab-utils interactive interface.
#
# ITEM TYPES (determined by 'type' field or structure):
# -----------------------------------------------------
#
#   type: script (default)
#     Execute a script file. id is path relative to lab-utils.d/
#     - id: "test-cuda.sh"
#       name: "Test CUDA"
#       description: "Run CUDA tests"
#
#   type: command
#     Execute a shell command. id is the command string.
#     - id: "nvidia-smi --query-gpu=name --format=csv"
#       name: "GPU Status"
#       description: "Show GPU information"
#       type: command
#
#   type: submenu (implicit when 'submenu' field present)
#     Static list of child items.
#     - name: "Git Utils"
#       submenu:
#         - id: "git-utils.d/git-pull-repos.sh"
#           name: "Pull All Repos"
#           description: "Pull from all repositories"
#
#   type: dynamic (implicit when 'scan_dir' field present)
#     Scans directory at runtime for executable scripts.
#     - name: "Local Scripts"
#       scan_dir: "~/.local/lab-utils.d"
#
#   Combined (submenu + scan_dir)
#     Static items plus dynamically discovered scripts.
#     - name: "Install Conda Env"
#       submenu:
#         - id: "install-conda-env.d/tensorflow.sh"
#           name: "TensorFlow"
#           description: "Install TensorFlow"
#       scan_dir: "~/.local/conda-env.d"
#
#   type: selector
#     Shows selection UI with options from inline list or script.
#     - name: "Default Shell"
#       selector:
#         options:  # inline options
#           - {value: "/bin/bash", label: "Bash"}
#           - {value: "/usr/bin/fish", label: "Fish"}
#         apply_script: "lib/set-profile-var"
#         apply_args: "JUPYTERLAB_TERMINAL_SHELL"
#
#     - name: "Default Conda Env"
#       selector:
#         options_script: "lib/conda-env-options"  # dynamic discovery
#         apply_script: "lib/set-profile-var"
#         apply_args: "CONDA_DEFAULT_ENV"
#
# =============================================================================

menu:
  title: "Lab Utils"
  items:
    - name: "Set Defaults"
      submenu:
        - name: "Default Shell"
          description: "Configure default terminal shell"
          selector:
            options:
              - {value: "/bin/bash", label: "Bash"}
              - {value: "/usr/bin/fish", label: "Fish"}
            current_cmd: "grep -oP 'JUPYTERLAB_TERMINAL_SHELL=\"\\K[^\"]*' ~/.profile 2>/dev/null"
            apply_script: "set-profile-var"
            apply_args: "JUPYTERLAB_TERMINAL_SHELL"

        - name: "Default Conda Env"
          description: "Set default conda environment"
          selector:
            options_script: "conda-env-options"
            current_cmd: "grep -oP 'CONDA_DEFAULT_ENV=\"\\K[^\"]*' ~/.profile 2>/dev/null"
            apply_script: "set-profile-var"
            apply_args: "CONDA_DEFAULT_ENV"

        - name: "Default AWS Profile"
          description: "Configure default AWS CLI profile"
          selector:
            options_script: "aws-profile-options"
            current_cmd: "grep -oP 'AWS_PROFILE=\"\\K[^\"]*' ~/.profile 2>/dev/null"
            apply_script: "set-profile-var"
            apply_args: "AWS_PROFILE"

    - name: "Git Utils"
      submenu:
        - id: "git-utils.d/git-pull-repos.sh"
          name: "Pull All Repos"
          description: "Pull latest changes from all git repositories"
        - id: "git-utils.d/git-push-repos.sh"
          name: "Push All Repos"
          description: "Push local commits to all git repositories"
        - id: "git-utils.d/git-commit-repos.sh"
          name: "Commit All Repos"
          description: "Commit changes in all git repositories"
        - id: "git-utils.d/git-pull-submodules.sh"
          name: "Pull Submodules"
          description: "Update all git submodules recursively"

    - name: "Install Conda Env"
      submenu:
        - id: "install-conda-env.d/tensorflow.sh"
          name: "TensorFlow"
          description: "Install TensorFlow deep learning environment"
        - id: "install-conda-env.d/torch.sh"
          name: "PyTorch"
          description: "Install PyTorch deep learning environment"
        - id: "install-conda-env.d/r.sh"
          name: "R"
          description: "Install R statistical computing environment"
        - id: "install-conda-env.d/rust.sh"
          name: "Rust"
          description: "Install Rust programming environment"
      scan_dir: "~/.local/conda-env.d"

    - name: "Install AI Assistant"
      submenu:
        - id: "install-ai-assistant.d/anthropic-claude-code.sh"
          name: "Anthropic Claude Code"
          description: "Install Claude Code AI assistant CLI"
        - id: "install-ai-assistant.d/anysphere-cursor.sh"
          name: "Anysphere Cursor"
          description: "Install Cursor AI-powered code editor"
        - id: "install-ai-assistant.d/google-gemini-cli.sh"
          name: "Google Gemini CLI"
          description: "Install Google Gemini AI assistant CLI"
        - id: "install-ai-assistant.d/openai-codex.sh"
          name: "OpenAI Codex"
          description: "Install OpenAI Codex AI assistant"

    - id: "install-docker-cli.sh"
      name: "Install Docker CLI"
      description: "Install Docker CLI tools to /opt/docker"

    - id: "new-project.sh"
      name: "New Project"
      description: "Scaffold new data science project using Copier"

    - id: "test-cuda.sh"
      name: "Test CUDA"
      description: "Test CUDA GPU support with TensorFlow and PyTorch"

    - name: "Local Scripts"
      scan_dir: "~/.local/lab-utils.d"
